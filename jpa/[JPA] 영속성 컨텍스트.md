# [JPA] 영속성 컨텍스트

"엔티티를 영구 저장하는 환경"

논리적인 개념이다.


persist();

- 영속성 컨텍스트에 저장한다.
-  영속시킨다.

## 1차 캐시

영속성 컨텍스트 내부에는 1차 캐시 공간이 있다.

1차캐시 공간에
"member1"만 있다고 가정해보자.

find("member1");

먼저 1차 캐시 공간을 찾는다.
캐시 공간에 있으면 캐시에서 찾아서 리턴.

find("member2");

1차 캐시 공간에 없다.
디비에서 조회에서 캐시공간에 저장 후 반환한다.

이 영속성 컨텍스트 (1차캐시)는 하나의 트랜잭션 단위로 저장하기 때문에 하나의 트랜잭션 내에서 유효하다.

```java
Member member1 = em.find(Member.class, 1L);
Member member2 = em.find(Member.class, 1L);
```

위의 두번의 find는 실제로 쿼리가 1개 날아간다.

### 영속 엔티티 동일성 보장

